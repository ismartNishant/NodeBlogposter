<!DOCTYPE html>
<html lang="en">
<%- include("./partials/header.ejs") %>

    <body>
        <!-- navabr -->
        <%- include("./partials/navbar.ejs") %>
            <div class="col-8 blogs m-auto">
                <div class="details content shadow p-3 rounded blog ">
                    <div class="flex column">
                        <h2 class="mb-1 title">
                            <%= blog.title %>
                        </h2>
                        <p class="mb-1 snippet">
                            <%= blog.snippet %>
                        </p>
                        <p class="mb-1 body">
                            <%= blog.body %>
                        </p>
                    </div>
                    <div class="text-end">
                        <a class="btn btn-outline-info delete" data-doc="<%= blog.id %>"><i class='bx bxs-trash'></i> Delete</a>
                    </div>

                </div>

            </div>
            </div>
            <%- include("./partials/footer.ejs") %>
                <script>
                    const trashcan = document.querySelector('a.delete');

                    trashcan.addEventListener('click', (e) => {
                        const endpoint = `/blogs/${trashcan.dataset.doc}`;

                        fetch(endpoint, {
                                method: 'DELETE',
                            })
                            .then(response => response.json())
                            .then(data => window.location.href = data.redirect)
                            .catch(err => console.log(err));
                    });
                </script>
                <script src="https://unpkg.com/boxicons@2.1.4/dist/boxicons.js">
                </script>
                <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js" integrity="sha384-C6RzsynM9kWDrMNeT87bh95OGNyZPhcTNXj1NW7RuBCsyN/o0jlpcV8Qyq46cDfL" crossorigin="anonymous"></script>
    </body>

</html>